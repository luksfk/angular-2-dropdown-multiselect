{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://angular-2-dropdown-multiselect/dropdown/search-filter.pipe.ts","ng://angular-2-dropdown-multiselect/dropdown/autofocus.directive.ts","ng://angular-2-dropdown-multiselect/dropdown/dropdown.component.ts","ng://angular-2-dropdown-multiselect/dropdown/off-click.directive.ts","ng://angular-2-dropdown-multiselect/dropdown/dropdown.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","MultiSelectSearchFilter","transform","options","str","limit","renderLimit","toLowerCase","this","_lastOptions","_searchCache","_searchCacheInclusive","_prevSkippedItems","filteredOpts","_doSearch","_limitRenderedItems","_getSubsetOptions","prevOptions","prevSearchStr","prevInclusiveOrIdx","concat","__spread","slice","prevStr","prevResults","prevResultShift","optsLength","maxFound","Math","min","regexp","RegExp","_escapeRegExp","founded","removedFromPrevResult","doesOptionMatch","option","test","name","getChildren","filter","child","parentId","id","getParent","find","parent","foundFn","item","notFoundFn","some","totalIterations","items","replace","Pipe","args","AutofocusDirective","elemRef","defineProperty","nativeElement","ngOnInit","focus","ngOnChanges","changes","ssAutofocusChange","isFirstChange","ssAutofocus","element","Directive","selector","ElementRef","decorators","type","Host","Input","MULTISELECT_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","MultiselectDropdownComponent","multi","fb","searchFilter","differs","cdRef","control","EventEmitter","filterControl","valueChanges","Subject","Set","closeOnClickOutside","pullRight","enableSearch","searchRenderLimit","searchRenderAfter","searchMaxLimit","searchMaxRenderedItems","checkedStyle","buttonClasses","containerClasses","selectionLimit","minSelectionLimit","closeOnSelect","autoUnselect","showCheckAll","showUncheckAll","fixedTitle","dynamicTitleMaxItems","maxHeight","isLazyLoad","stopScrollPropagation","loadViewDistance","selectAddedValues","ignoreLabels","maintainSelectionOrderInTitle","focusBack","useArray","checkAll","uncheckAll","checked","checkedPlural","searchPlaceholder","searchEmptyResult","searchNoRenderText","defaultTitle","allSelected","_","differ","create","settings","defaultSettings","texts","defaultTexts","_focusBack","clickedOutside","isVisible","dropdownClosed","emit","_isVisible","val","_workerDocClicked","searchLimit","getItemStyle","isLabel","disabled","getItemStyleSelectionDisabled","disabledSelection","cursor","_this","title","pipe","takeUntil","destroyed$","subscribe","updateRenderItems","load","parents","map","loadedValueIds","currentValue","previousValue","addedValues_1","indexOf","checkAllStatus","addChecks","checkAllSearchRegister","size","forEach","searchValue","applyFilters","updateTitle","fireModelChange","ngOnDestroy","renderItems","searchLimitApplied","filteredOptions","renderFilteredOptions","focusedItem","undefined","model","prevModel","onModelChange","onModelTouched","markForCheck","writeValue","Array","isArray","ngDoCheck","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","diff","updateNumSelected","validate","_c","required","valid","selection","registerOnValidatorChange","_fn","Error","clearSearch","event","maybeStopPropagation","setValue","toggleDropdown","dropdownOpened","closeDropdown","isSelected","setSelected","_event","setTimeout","maybePreventDefault","index","isAtSelectionLimit","removeItem","idx","splice","onRemoved","lazyLoadOptions","numSelected","parentIndex","selectionLimitReached","addItem_1","onAdded","every","numSelectedOptions","displayAllSelectedText","useOptions_1","titleSelections","optionIds_1","selectOption","selectedId","optionIndex","join","searchFilterApplied","checkedOptions","add","clear","unCheckedOptions_1","has","delete","searchTerm","filterOptions","preventCheckboxCheck","isCheckboxDisabled","checkScrollPosition","ev","scrollTop","target","scrollHeight","scrollElementHeight","clientHeight","checkScrollPropagation","deltaY","window","returnValue","trackById","onLazyLoad","checkAllSearches","focusItem","dir","nextIdx","newIdx","preventDefault","stopPropagation","Component","template","providers","changeDetection","ChangeDetectionStrategy","OnPush","FormBuilder","IterableDiffers","ChangeDetectorRef","Output","OffClickDirective","onClick","_clickEvent","onTouch","_touchEvent","onDocumentClick","onOffClick","onDocumentTouch","HostListener","MultiselectDropdownModule","NgModule","imports","CommonModule","ReactiveFormsModule","exports","declarations"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { IMultiSelectOption } from './types';\r\n\r\ninterface StringHashMap<T> {\r\n  [k: string]: T;\r\n}\r\n\r\n@Pipe({\r\n  name: 'searchFilter'\r\n})\r\nexport class MultiSelectSearchFilter implements PipeTransform {\r\n\r\n  private _lastOptions: IMultiSelectOption[];\r\n  private _searchCache: StringHashMap<IMultiSelectOption[]> = {};\r\n  private _searchCacheInclusive: StringHashMap<boolean | number> = {};\r\n  private _prevSkippedItems: StringHashMap<number> = {};\r\n\r\n  transform(\r\n    options: IMultiSelectOption[],\r\n    str = '',\r\n    limit = 0,\r\n    renderLimit = 0\r\n  ): IMultiSelectOption[] {\r\n    str = str.toLowerCase();\r\n\r\n    // Drop cache because options were updated\r\n    if (options !== this._lastOptions) {\r\n      this._lastOptions = options;\r\n      this._searchCache = {};\r\n      this._searchCacheInclusive = {};\r\n      this._prevSkippedItems = {};\r\n    }\r\n\r\n    const filteredOpts = this._searchCache.hasOwnProperty(str)\r\n      ? this._searchCache[str]\r\n      : this._doSearch(options, str, limit);\r\n\r\n    const isUnderLimit = options.length <= limit;\r\n\r\n    return isUnderLimit\r\n      ? filteredOpts\r\n      : this._limitRenderedItems(filteredOpts, renderLimit);\r\n  }\r\n\r\n  private _getSubsetOptions(\r\n    options: IMultiSelectOption[],\r\n    prevOptions: IMultiSelectOption[],\r\n    prevSearchStr: string\r\n  ) {\r\n    const prevInclusiveOrIdx = this._searchCacheInclusive[prevSearchStr];\r\n\r\n    if (prevInclusiveOrIdx === true) {\r\n      // If have previous results and it was inclusive, do only subsearch\r\n      return prevOptions;\r\n    } else if (typeof prevInclusiveOrIdx === 'number') {\r\n      // Or reuse prev results with unchecked ones\r\n      return [...prevOptions, ...options.slice(prevInclusiveOrIdx)];\r\n    }\r\n\r\n    return options;\r\n  }\r\n\r\n  private _doSearch(options: IMultiSelectOption[], str: string, limit: number) {\r\n    const prevStr = str.slice(0, -1);\r\n    const prevResults = this._searchCache[prevStr];\r\n    const prevResultShift = this._prevSkippedItems[prevStr] || 0;\r\n\r\n    if (prevResults) {\r\n      options = this._getSubsetOptions(options, prevResults, prevStr);\r\n    }\r\n\r\n    const optsLength = options.length;\r\n    const maxFound = limit > 0 ? Math.min(limit, optsLength) : optsLength;\r\n    const regexp = new RegExp(this._escapeRegExp(str), 'i');\r\n    const filteredOpts: IMultiSelectOption[] = [];\r\n\r\n    let i = 0, founded = 0, removedFromPrevResult = 0;\r\n\r\n    const doesOptionMatch = (option: IMultiSelectOption) => regexp.test(option.name);\r\n    const getChildren = (option: IMultiSelectOption) =>\r\n      options.filter(child => child.parentId === option.id);\r\n    const getParent = (option: IMultiSelectOption) =>\r\n      options.find(parent => option.parentId === parent.id);\r\n    const foundFn = (item: any) => { filteredOpts.push(item); founded++; };\r\n    const notFoundFn = prevResults ? () => removedFromPrevResult++ : () => { };\r\n\r\n    for (; i < optsLength && founded < maxFound; ++i) {\r\n      const option = options[i];\r\n      const directMatch = doesOptionMatch(option);\r\n\r\n      if (directMatch) {\r\n        foundFn(option);\r\n        continue;\r\n      }\r\n\r\n      if (typeof option.parentId === 'undefined') {\r\n        const childrenMatch = getChildren(option).some(doesOptionMatch);\r\n\r\n        if (childrenMatch) {\r\n          foundFn(option);\r\n          continue;\r\n        }\r\n      }\r\n\r\n      if (typeof option.parentId !== 'undefined') {\r\n        const parentMatch = doesOptionMatch(getParent(option));\r\n\r\n        if (parentMatch) {\r\n          foundFn(option);\r\n          continue;\r\n        }\r\n      }\r\n\r\n      notFoundFn();\r\n    }\r\n\r\n    const totalIterations = i + prevResultShift;\r\n\r\n    this._searchCache[str] = filteredOpts;\r\n    this._searchCacheInclusive[str] = i === optsLength || totalIterations;\r\n    this._prevSkippedItems[str] = removedFromPrevResult + prevResultShift;\r\n\r\n    return filteredOpts;\r\n  }\r\n\r\n  private _limitRenderedItems<T>(items: T[], limit: number): T[] {\r\n    return items.length > limit && limit > 0 ? items.slice(0, limit) : items;\r\n  }\r\n\r\n  private _escapeRegExp(str: string): string {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  }\r\n\r\n}\r\n","import { Directive, ElementRef, Host, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[ssAutofocus]'\r\n})\r\nexport class AutofocusDirective implements OnInit, OnChanges {\r\n\r\n  /**\r\n   * Will set focus if set to falsy value or not set at all\r\n   */\r\n  @Input() ssAutofocus: boolean;\r\n\r\n  get element(): { focus?: Function } {\r\n    return this.elemRef.nativeElement;\r\n  }\r\n\r\n  constructor(\r\n    @Host() private elemRef: ElementRef,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.focus();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const ssAutofocusChange = changes.ssAutofocus;\r\n\r\n    if (ssAutofocusChange && !ssAutofocusChange.isFirstChange()) {\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  focus() {\r\n    if (this.ssAutofocus) {\r\n      return;\r\n    }\r\n\r\n    this.element.focus && this.element.focus();\r\n  }\r\n\r\n}\r\n","\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  DoCheck,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef,\r\n  HostListener,\r\n  Input,\r\n  IterableDiffers,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport {\r\n  AbstractControl,\r\n  ControlValueAccessor,\r\n  FormBuilder,\r\n  FormControl,\r\n  NG_VALUE_ACCESSOR,\r\n  Validator,\r\n} from '@angular/forms';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nimport { MultiSelectSearchFilter } from './search-filter.pipe';\r\nimport { IMultiSelectOption, IMultiSelectSettings, IMultiSelectTexts, } from './types';\r\n\r\n/*\r\n * Angular 2 Dropdown Multiselect for Bootstrap\r\n *\r\n * Simon Lindh\r\n * https://github.com/softsimon/angular-2-dropdown-multiselect\r\n */\r\n\r\nconst MULTISELECT_VALUE_ACCESSOR: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => MultiselectDropdownComponent),\r\n  multi: true,\r\n};\r\n\r\n@Component({\r\n  selector: 'ss-multiselect-dropdown',\r\n  templateUrl: './dropdown.component.html',\r\n  styleUrls: ['./dropdown.component.css'],\r\n  providers: [MULTISELECT_VALUE_ACCESSOR, MultiSelectSearchFilter],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MultiselectDropdownComponent\r\n  implements OnInit,\r\n  OnChanges,\r\n  DoCheck,\r\n  OnDestroy,\r\n  ControlValueAccessor,\r\n  Validator {\r\n  filterControl: FormControl = this.fb.control('');\r\n\r\n  @Input() options: Array<IMultiSelectOption>;\r\n  @Input() settings: IMultiSelectSettings;\r\n  @Input() texts: IMultiSelectTexts;\r\n  @Input() disabled: boolean = false;\r\n  @Input() disabledSelection: boolean = false;\r\n\r\n  @Output() selectionLimitReached = new EventEmitter();\r\n  @Output() dropdownClosed = new EventEmitter();\r\n  @Output() dropdownOpened = new EventEmitter();\r\n  @Output() onAdded = new EventEmitter();\r\n  @Output() onRemoved = new EventEmitter();\r\n  @Output() onLazyLoad = new EventEmitter();\r\n  @Output() onFilter: Observable<string> = this.filterControl.valueChanges;\r\n\r\n  get focusBack(): boolean {\r\n    return this.settings.focusBack && this._focusBack;\r\n  }\r\n\r\n  public clickedOutside(): void {\r\n    if (!this.isVisible || !this.settings.closeOnClickOutside) { return; }\r\n\r\n    this.isVisible = false;\r\n    this._focusBack = true;\r\n    this.dropdownClosed.emit();\r\n  }\r\n\r\n  destroyed$ = new Subject<any>();\r\n\r\n  filteredOptions: IMultiSelectOption[] = [];\r\n  lazyLoadOptions: IMultiSelectOption[] = [];\r\n  renderFilteredOptions: IMultiSelectOption[] = [];\r\n  model: any[] = [];\r\n  prevModel: any[] = [];\r\n  parents: any[];\r\n  title: string;\r\n  differ: any;\r\n  numSelected: number = 0;\r\n  set isVisible(val: boolean) {\r\n    this._isVisible = val;\r\n    this._workerDocClicked = val ? false : this._workerDocClicked;\r\n  }\r\n  get isVisible() {\r\n    return this._isVisible;\r\n  }\r\n  renderItems = true;\r\n  checkAllSearchRegister = new Set();\r\n  checkAllStatus = false;\r\n  loadedValueIds = [];\r\n  _focusBack = false;\r\n  focusedItem: IMultiSelectOption | undefined;\r\n\r\n  defaultSettings: IMultiSelectSettings = {\r\n    closeOnClickOutside: true,\r\n    pullRight: false,\r\n    enableSearch: false,\r\n    searchRenderLimit: 0,\r\n    searchRenderAfter: 1,\r\n    searchMaxLimit: 0,\r\n    searchMaxRenderedItems: 0,\r\n    checkedStyle: 'checkboxes',\r\n    buttonClasses: 'btn btn-primary dropdown-toggle',\r\n    containerClasses: 'dropdown-inline',\r\n    selectionLimit: 0,\r\n    minSelectionLimit: 0,\r\n    closeOnSelect: false,\r\n    autoUnselect: false,\r\n    showCheckAll: false,\r\n    showUncheckAll: false,\r\n    fixedTitle: false,\r\n    dynamicTitleMaxItems: 3,\r\n    maxHeight: '300px',\r\n    isLazyLoad: false,\r\n    stopScrollPropagation: false,\r\n    loadViewDistance: 1,\r\n    selectAddedValues: false,\r\n    ignoreLabels: false,\r\n    maintainSelectionOrderInTitle: false,\r\n    focusBack: true,\r\n    useArray: true\r\n  };\r\n  defaultTexts: IMultiSelectTexts = {\r\n    checkAll: 'Check all',\r\n    uncheckAll: 'Uncheck all',\r\n    checked: 'checked',\r\n    checkedPlural: 'checked',\r\n    searchPlaceholder: 'Search...',\r\n    searchEmptyResult: 'Nothing found...',\r\n    searchNoRenderText: 'Type in search box to see results...',\r\n    defaultTitle: 'Select',\r\n    allSelected: 'All selected',\r\n  };\r\n\r\n  get searchLimit() {\r\n    return this.settings.searchRenderLimit;\r\n  }\r\n\r\n  get searchRenderAfter() {\r\n    return this.settings.searchRenderAfter;\r\n  }\r\n\r\n  get searchLimitApplied() {\r\n    return this.searchLimit > 0 && this.options.length > this.searchLimit;\r\n  }\r\n\r\n  private _isVisible = false;\r\n  private _workerDocClicked = false;\r\n\r\n  constructor(\r\n    private element: ElementRef,\r\n    private fb: FormBuilder,\r\n    private searchFilter: MultiSelectSearchFilter,\r\n    differs: IterableDiffers,\r\n    private cdRef: ChangeDetectorRef\r\n  ) {\r\n    this.differ = differs.find([]).create(null);\r\n    this.settings = this.defaultSettings;\r\n    this.texts = this.defaultTexts;\r\n  }\r\n\r\n  getItemStyle(option: IMultiSelectOption): any {\r\n    const style = {};\r\n    if (!option.isLabel) {\r\n      style['cursor'] = 'pointer';\r\n    }\r\n    if (option.disabled) {\r\n      style['cursor'] = 'default';\r\n    }\r\n  }\r\n\r\n  getItemStyleSelectionDisabled(): any {\r\n    if (this.disabledSelection) {\r\n      return { cursor: 'default' };\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.title = this.texts.defaultTitle || '';\r\n\r\n    this.filterControl.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe(() => {\r\n      this.updateRenderItems();\r\n      if (this.settings.isLazyLoad) {\r\n        this.load();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes['options']) {\r\n      this.options = this.options || [];\r\n      this.parents = this.options\r\n        .filter(option => typeof option.parentId === 'number')\r\n        .map(option => option.parentId);\r\n      this.updateRenderItems();\r\n\r\n      if (\r\n        this.settings.isLazyLoad &&\r\n        this.settings.selectAddedValues &&\r\n        this.loadedValueIds.length === 0\r\n      ) {\r\n        this.loadedValueIds = this.loadedValueIds.concat(\r\n          changes.options.currentValue.map(value => value.id)\r\n        );\r\n      }\r\n      if (\r\n        this.settings.isLazyLoad &&\r\n        this.settings.selectAddedValues &&\r\n        changes.options.previousValue\r\n      ) {\r\n        const addedValues = changes.options.currentValue.filter(\r\n          value => this.loadedValueIds.indexOf(value.id) === -1\r\n        );\r\n        this.loadedValueIds.concat(addedValues.map(value => value.id));\r\n        if (this.checkAllStatus) {\r\n          this.addChecks(addedValues);\r\n        } else if (this.checkAllSearchRegister.size > 0) {\r\n          this.checkAllSearchRegister.forEach(searchValue =>\r\n            this.addChecks(this.applyFilters(addedValues, searchValue))\r\n          );\r\n        }\r\n      }\r\n\r\n      if (this.texts) {\r\n        this.updateTitle();\r\n      }\r\n\r\n      this.fireModelChange();\r\n    }\r\n\r\n    if (changes['settings']) {\r\n      this.settings = { ...this.defaultSettings, ...this.settings };\r\n    }\r\n\r\n    if (changes['texts']) {\r\n      this.texts = { ...this.defaultTexts, ...this.texts };\r\n      if (!changes['texts'].isFirstChange()) { this.updateTitle(); }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroyed$.next();\r\n  }\r\n\r\n  updateRenderItems() {\r\n    this.renderItems =\r\n      !this.searchLimitApplied ||\r\n      this.filterControl.value.length >= this.searchRenderAfter;\r\n    this.filteredOptions = this.applyFilters(\r\n      this.options,\r\n      this.settings.isLazyLoad ? '' : this.filterControl.value\r\n    );\r\n    this.renderFilteredOptions = this.renderItems ? this.filteredOptions : [];\r\n    this.focusedItem = undefined;\r\n  }\r\n\r\n  applyFilters(options, value) {\r\n    return this.searchFilter.transform(\r\n      options,\r\n      value,\r\n      this.settings.searchMaxLimit,\r\n      this.settings.searchMaxRenderedItems\r\n    );\r\n  }\r\n\r\n  fireModelChange() {\r\n    if (this.model != this.prevModel) {\r\n      this.prevModel = this.model;\r\n      this.onModelChange(this.model);\r\n      this.onModelTouched();\r\n      this.cdRef.markForCheck();\r\n    }\r\n  }\r\n\r\n  onModelChange: Function = (_: any) => { };\r\n  onModelTouched: Function = () => { };\r\n\r\n  writeValue(value: any): void {\r\n    if (value !== undefined && value !== null) {\r\n      if (this.settings.useArray) {\r\n        this.model = Array.isArray(value) ? value : [value];\r\n      } else {\r\n        this.model = value;\r\n      }\r\n\r\n      this.ngDoCheck();\r\n    } else {\r\n      if (this.settings.useArray) {\r\n        this.model = [];\r\n      } else {\r\n        this.model = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn: Function): void {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: Function): void {\r\n    this.onModelTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean) {\r\n    this.disabled = isDisabled;\r\n  }\r\n\r\n  ngDoCheck() {\r\n    const changes = this.differ.diff(this.model);\r\n    if (changes) {\r\n      this.updateNumSelected();\r\n      this.updateTitle();\r\n    }\r\n  }\r\n\r\n  validate(_c: AbstractControl): { [key: string]: any } {\r\n    if (this.model && this.model.length) {\r\n      return {\r\n        required: {\r\n          valid: false\r\n        }\r\n      };\r\n    }\r\n\r\n    if (this.options.filter(o => this.model.indexOf(o.id) && !o.disabled).length === 0) {\r\n      return {\r\n        selection: {\r\n          valid: false\r\n        }\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  registerOnValidatorChange(_fn: () => void): void {\r\n    throw new Error('Method not implemented.');\r\n  }\r\n\r\n  clearSearch(event: Event) {\r\n    this.maybeStopPropagation(event);\r\n    this.filterControl.setValue('');\r\n  }\r\n\r\n  toggleDropdown(e?: Event) {\r\n    if (this.isVisible) {\r\n      this._focusBack = true;\r\n    }\r\n\r\n    this.isVisible = !this.isVisible;\r\n    this.isVisible ? this.dropdownOpened.emit() : this.dropdownClosed.emit();\r\n    this.focusedItem = undefined;\r\n  }\r\n\r\n  closeDropdown(e?: Event) {\r\n    this.isVisible = true;\r\n    this.toggleDropdown(e);\r\n  }\r\n\r\n  isSelected(option: IMultiSelectOption): boolean {\r\n    return this.model && this.model.indexOf(option.id) > -1;\r\n  }\r\n\r\n  setSelected(_event: Event, option: IMultiSelectOption) {\r\n    if (option.isLabel) {\r\n      return;\r\n    }\r\n\r\n    if (option.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (this.disabledSelection) {\r\n      return;\r\n    }\r\n\r\n    setTimeout(() => {\r\n      this.maybeStopPropagation(_event);\r\n      this.maybePreventDefault(_event);\r\n      const index = this.model.indexOf(option.id);\r\n      const isAtSelectionLimit =\r\n        this.settings.selectionLimit > 0 &&\r\n        this.model.length >= this.settings.selectionLimit;\r\n      const removeItem = (idx, id): void => {\r\n        this.model.splice(idx, 1);\r\n        this.onRemoved.emit(id);\r\n        if (\r\n          this.settings.isLazyLoad &&\r\n          this.lazyLoadOptions.some(val => val.id === id)\r\n        ) {\r\n          this.lazyLoadOptions.splice(\r\n            this.lazyLoadOptions.indexOf(\r\n              this.lazyLoadOptions.find(val => val.id === id)\r\n            ),\r\n            1\r\n          );\r\n        }\r\n      };\r\n\r\n      if (index > -1) {\r\n        if (\r\n          this.settings.minSelectionLimit === undefined ||\r\n          this.numSelected > this.settings.minSelectionLimit\r\n        ) {\r\n          removeItem(index, option.id);\r\n        }\r\n        const parentIndex =\r\n          option.parentId && this.model.indexOf(option.parentId);\r\n        if (parentIndex > -1) {\r\n          removeItem(parentIndex, option.parentId);\r\n        } else if (this.parents.indexOf(option.id) > -1) {\r\n          this.options\r\n            .filter(\r\n              child =>\r\n                this.model.indexOf(child.id) > -1 &&\r\n                child.parentId === option.id\r\n            )\r\n            .forEach(child =>\r\n              removeItem(this.model.indexOf(child.id), child.id)\r\n            );\r\n        }\r\n      } else if (isAtSelectionLimit && !this.settings.autoUnselect) {\r\n        this.selectionLimitReached.emit(this.model.length);\r\n        return;\r\n      } else {\r\n        const addItem = (id): void => {\r\n          this.model.push(id);\r\n          this.onAdded.emit(id);\r\n          if (\r\n            this.settings.isLazyLoad &&\r\n            !this.lazyLoadOptions.some(val => val.id === id)\r\n          ) {\r\n            this.lazyLoadOptions.push(option);\r\n          }\r\n        };\r\n\r\n        addItem(option.id);\r\n        if (!isAtSelectionLimit) {\r\n          if (option.parentId && !this.settings.ignoreLabels) {\r\n            const children = this.options.filter(\r\n              child =>\r\n                child.id !== option.id && child.parentId === option.parentId\r\n            );\r\n            if (children.every(child => this.model.indexOf(child.id) > -1)) {\r\n              addItem(option.parentId);\r\n            }\r\n          } else if (this.parents.indexOf(option.id) > -1) {\r\n            const children = this.options.filter(\r\n              child =>\r\n                this.model.indexOf(child.id) < 0 && child.parentId === option.id\r\n            );\r\n            children.forEach(child => addItem(child.id));\r\n          }\r\n        } else {\r\n          removeItem(0, this.model[0]);\r\n        }\r\n      }\r\n      if (this.settings.closeOnSelect) {\r\n        this.toggleDropdown();\r\n      }\r\n      this.model = this.model.slice();\r\n      this.fireModelChange();\r\n\r\n    }, 0)\r\n  }\r\n\r\n  updateNumSelected() {\r\n    this.numSelected =\r\n      this.model.filter(id => this.parents.indexOf(id) < 0).length || 0;\r\n  }\r\n\r\n  updateTitle() {\r\n    let numSelectedOptions = this.options.length;\r\n    if (this.settings.ignoreLabels) {\r\n      numSelectedOptions = this.options.filter(\r\n        (option: IMultiSelectOption) => !option.isLabel\r\n      ).length;\r\n    }\r\n    if (this.numSelected === 0 || this.settings.fixedTitle) {\r\n      this.title = this.texts ? this.texts.defaultTitle : '';\r\n    } else if (\r\n      this.settings.displayAllSelectedText &&\r\n      this.model.length === numSelectedOptions\r\n    ) {\r\n      this.title = this.texts ? this.texts.allSelected : '';\r\n    } else if (\r\n      this.settings.dynamicTitleMaxItems &&\r\n      this.settings.dynamicTitleMaxItems >= this.numSelected\r\n    ) {\r\n      const useOptions =\r\n        this.settings.isLazyLoad && this.lazyLoadOptions.length\r\n          ? this.lazyLoadOptions\r\n          : this.options;\r\n\r\n      let titleSelections: Array<IMultiSelectOption>;\r\n\r\n      if (this.settings.maintainSelectionOrderInTitle) {\r\n        const optionIds = useOptions.map((selectOption: IMultiSelectOption, idx: number) => selectOption.id);\r\n        titleSelections = this.model\r\n          .map((selectedId) => optionIds.indexOf(selectedId))\r\n          .filter((optionIndex) => optionIndex > -1)\r\n          .map((optionIndex) => useOptions[optionIndex]);\r\n      } else {\r\n        titleSelections = useOptions.filter((option: IMultiSelectOption) => this.model.indexOf(option.id) > -1);\r\n      }\r\n\r\n      this.title = titleSelections.map((option: IMultiSelectOption) => option.name).join(', ');\r\n    } else {\r\n      this.title =\r\n        this.numSelected +\r\n        ' ' +\r\n        (this.numSelected === 1\r\n          ? this.texts.checked\r\n          : this.texts.checkedPlural);\r\n    }\r\n    this.cdRef.markForCheck();\r\n  }\r\n\r\n  searchFilterApplied() {\r\n    return (\r\n      this.settings.enableSearch &&\r\n      this.filterControl.value &&\r\n      this.filterControl.value.length > 0\r\n    );\r\n  }\r\n\r\n  addChecks(options) {\r\n    const checkedOptions = options\r\n      .filter((option: IMultiSelectOption) => {\r\n        if (\r\n          !option.disabled &&\r\n          (\r\n            this.model.indexOf(option.id) === -1 &&\r\n            !(this.settings.ignoreLabels && option.isLabel)\r\n          )\r\n        ) {\r\n          this.onAdded.emit(option.id);\r\n          return true;\r\n        }\r\n        return false;\r\n      })\r\n      .map((option: IMultiSelectOption) => option.id);\r\n\r\n    this.model = this.model.concat(checkedOptions);\r\n  }\r\n\r\n  checkAll() {\r\n    if (!this.disabledSelection) {\r\n      this.addChecks(\r\n        !this.searchFilterApplied() ? this.options : this.filteredOptions\r\n      );\r\n      if (this.settings.isLazyLoad && this.settings.selectAddedValues) {\r\n        if (this.searchFilterApplied() && !this.checkAllStatus) {\r\n          this.checkAllSearchRegister.add(this.filterControl.value);\r\n        } else {\r\n          this.checkAllSearchRegister.clear();\r\n          this.checkAllStatus = true;\r\n        }\r\n        this.load();\r\n      }\r\n      this.fireModelChange();\r\n    }\r\n  }\r\n\r\n  uncheckAll() {\r\n    if (!this.disabledSelection) {\r\n      const checkedOptions = this.model;\r\n      let unCheckedOptions = !this.searchFilterApplied()\r\n        ? this.model\r\n        : this.filteredOptions.map((option: IMultiSelectOption) => option.id);\r\n      // set unchecked options only to the ones that were checked\r\n      unCheckedOptions = checkedOptions.filter(item => unCheckedOptions.indexOf(item) > -1);\r\n      this.model = this.model.filter((id: number) => {\r\n        if (\r\n          (unCheckedOptions.indexOf(id) < 0 &&\r\n            this.settings.minSelectionLimit === undefined) ||\r\n          unCheckedOptions.indexOf(id) < this.settings.minSelectionLimit\r\n        ) {\r\n          return true;\r\n        } else {\r\n          this.onRemoved.emit(id);\r\n          return false;\r\n        }\r\n      });\r\n      if (this.settings.isLazyLoad && this.settings.selectAddedValues) {\r\n        if (this.searchFilterApplied()) {\r\n          if (this.checkAllSearchRegister.has(this.filterControl.value)) {\r\n            this.checkAllSearchRegister.delete(this.filterControl.value);\r\n            this.checkAllSearchRegister.forEach(function (searchTerm) {\r\n              const filterOptions = this.applyFilters(this.options.filter(option => unCheckedOptions.indexOf(option.id) > -1), searchTerm);\r\n              this.addChecks(filterOptions);\r\n            });\r\n          }\r\n        } else {\r\n          this.checkAllSearchRegister.clear();\r\n          this.checkAllStatus = false;\r\n        }\r\n        this.load();\r\n      }\r\n      this.fireModelChange();\r\n    }\r\n  }\r\n\r\n  preventCheckboxCheck(event: Event, option: IMultiSelectOption) {\r\n    if (\r\n      option.disabled ||\r\n      (\r\n        this.settings.selectionLimit &&\r\n        !this.settings.autoUnselect &&\r\n        this.model.length >= this.settings.selectionLimit &&\r\n        this.model.indexOf(option.id) === -1 &&\r\n        this.maybePreventDefault(event)\r\n      )\r\n    ) {\r\n      this.maybePreventDefault(event);\r\n    }\r\n  }\r\n\r\n  isCheckboxDisabled(option?: IMultiSelectOption): boolean {\r\n    return this.disabledSelection || option && option.disabled;\r\n  }\r\n\r\n  checkScrollPosition(ev) {\r\n    const scrollTop = ev.target.scrollTop;\r\n    const scrollHeight = ev.target.scrollHeight;\r\n    const scrollElementHeight = ev.target.clientHeight;\r\n    const roundingPixel = 1;\r\n    const gutterPixel = 1;\r\n\r\n    if (\r\n      scrollTop >=\r\n      scrollHeight -\r\n      (1 + this.settings.loadViewDistance) * scrollElementHeight -\r\n      roundingPixel -\r\n      gutterPixel\r\n    ) {\r\n      this.load();\r\n    }\r\n  }\r\n\r\n  checkScrollPropagation(ev, element) {\r\n    const scrollTop = element.scrollTop;\r\n    const scrollHeight = element.scrollHeight;\r\n    const scrollElementHeight = element.clientHeight;\r\n\r\n    if (\r\n      (ev.deltaY > 0 && scrollTop + scrollElementHeight >= scrollHeight) ||\r\n      (ev.deltaY < 0 && scrollTop <= 0)\r\n    ) {\r\n      ev = ev || window.event;\r\n      this.maybePreventDefault(ev);\r\n      ev.returnValue = false;\r\n    }\r\n  }\r\n\r\n  trackById(idx: number, selectOption: IMultiSelectOption) {\r\n    return selectOption.id;\r\n  }\r\n\r\n  load() {\r\n    this.onLazyLoad.emit({\r\n      length: this.options.length,\r\n      filter: this.filterControl.value,\r\n      checkAllSearches: this.checkAllSearchRegister,\r\n      checkAllStatus: this.checkAllStatus,\r\n    });\r\n  }\r\n\r\n  focusItem(dir: number, e?: Event) {\r\n    if (!this.isVisible) {\r\n      return;\r\n    }\r\n\r\n    this.maybePreventDefault(e);\r\n\r\n    const idx = this.filteredOptions.indexOf(this.focusedItem);\r\n\r\n    if (idx === -1) {\r\n      this.focusedItem = this.filteredOptions[0];\r\n      return;\r\n    }\r\n\r\n    const nextIdx = idx + dir;\r\n    const newIdx =\r\n      nextIdx < 0\r\n        ? this.filteredOptions.length - 1\r\n        : nextIdx % this.filteredOptions.length;\r\n\r\n    this.focusedItem = this.filteredOptions[newIdx];\r\n  }\r\n\r\n  private maybePreventDefault(e?: { preventDefault?: Function }) {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  private maybeStopPropagation(e?: { stopPropagation?: Function }) {\r\n    if (e && e.stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n  }\r\n}\r\n","import { Directive, HostListener, Input, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { ComponentRef } from '@angular/core';\r\nimport { ElementRef } from '@angular/core';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { Host } from '@angular/core';\r\nimport { Output } from '@angular/core';\r\n\r\n@Directive({\r\n  // tslint:disable-next-line:directive-selector\r\n  selector: '[offClick]',\r\n})\r\n\r\nexport class OffClickDirective {\r\n  @Output('offClick') onOffClick = new EventEmitter<any>();\r\n\r\n  private _clickEvent: MouseEvent;\r\n  private _touchEvent: TouchEvent;\r\n\r\n  @HostListener('click', ['$event']) \r\n  public onClick(event: MouseEvent): void {\r\n    this._clickEvent = event;\r\n  }\r\n\r\n  @HostListener('touchstart', ['$event'])\r\n  public onTouch(event: TouchEvent): void {\r\n    this._touchEvent = event;\r\n  }\r\n\r\n  @HostListener('document:click', ['$event']) \r\n  public onDocumentClick(event: MouseEvent): void {\r\n    if (event !== this._clickEvent) {\r\n      this.onOffClick.emit(event);\r\n    }\r\n  }\r\n\r\n  @HostListener('document:touchstart', ['$event'])\r\n  public onDocumentTouch(event: TouchEvent): void {\r\n    if (event !== this._touchEvent) {\r\n      this.onOffClick.emit(event);\r\n    }\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { AutofocusDirective } from './autofocus.directive';\r\nimport { MultiselectDropdownComponent } from './dropdown.component';\r\nimport { MultiSelectSearchFilter } from './search-filter.pipe';\r\nimport { OffClickDirective } from './off-click.directive';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, ReactiveFormsModule],\r\n  exports: [\r\n    MultiselectDropdownComponent,\r\n    MultiSelectSearchFilter,\r\n  ],\r\n  declarations: [\r\n    MultiselectDropdownComponent,\r\n    MultiSelectSearchFilter,\r\n    AutofocusDirective,\r\n    OffClickDirective\r\n  ],\r\n})\r\nexport class MultiselectDropdownModule { }\r\n"]}